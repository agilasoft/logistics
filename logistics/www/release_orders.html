{% extends "templates/web.html" %}

{% block page_content %}
<div class="container">
	<div class="row">
		<div class="col-12">
			<div class="page-header">
				<h1 class="page-title">Release Orders</h1>
				{% if customer_name %}
				<p class="text-muted">Customer: <strong>{{ customer_name }}</strong></p>
				{% endif %}
			</div>
			
			{% if orders %}
			<div class="card">
				<div class="card-body">
					<div class="table-responsive">
						<table class="table table-striped table-hover">
							<thead class="thead-light">
								<tr>
									<th>Order ID</th>
									<th>Order Date</th>
									<th>Customer</th>
									<th>Contract</th>
									<th>Priority</th>
									<th>Planned Date</th>
									<th>Due Date</th>
									<th>Status</th>
									<th>Actions</th>
								</tr>
							</thead>
							<tbody>
								{% for order in orders %}
								<tr>
									<td>
										<strong>{{ order.name }}</strong>
									</td>
									<td>{{ frappe.format(order.order_date, {"fieldtype": "Date"}) }}</td>
									<td>{{ order.customer }}</td>
									<td>{{ order.contract or "-" }}</td>
									<td>
										<span class="badge badge-{{ 'danger' if order.priority == 'High' else 'warning' if order.priority == 'Normal' else 'info' }}">
											{{ order.priority or "-" }}
										</span>
									</td>
									<td>{{ frappe.format(order.planned_date, {"fieldtype": "Datetime"}) if order.planned_date else "-" }}</td>
									<td>{{ frappe.format(order.due_date, {"fieldtype": "Datetime"}) if order.due_date else "-" }}</td>
									<td>
										<span class="badge badge-{{ order.status_color }}">
											{{ order.status_text }}
										</span>
									</td>
									<td>
										<div class="btn-group" role="group">
											<a href="/release-order/{{ order.name }}" class="btn btn-sm btn-outline-primary">
												<i class="fa fa-eye"></i> View
											</a>
											{% if order.docstatus == 0 %}
											<a href="/release-order/{{ order.name }}?edit=1" class="btn btn-sm btn-outline-secondary">
												<i class="fa fa-edit"></i> Edit
											</a>
											{% endif %}
										</div>
									</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
			{% else %}
			<div class="alert alert-info">
				<i class="fa fa-info-circle"></i>
				No release orders found for your account.
			</div>
			{% endif %}
		</div>
	</div>
</div>

<style>
.page-header {
	margin-bottom: 2rem;
	padding-bottom: 1rem;
	border-bottom: 1px solid #dee2e6;
}

.page-title {
	margin-bottom: 0.5rem;
	color: #495057;
}

.table th {
	border-top: none;
	font-weight: 600;
	color: #495057;
	background-color: #f8f9fa;
}

.table td {
	vertical-align: middle;
}

.btn-group .btn {
	margin-right: 0.25rem;
}

.btn-group .btn:last-child {
	margin-right: 0;
}

.badge {
	font-size: 0.75em;
}

.alert {
	border-radius: 0.375rem;
}
</style>
{% endblock %}
